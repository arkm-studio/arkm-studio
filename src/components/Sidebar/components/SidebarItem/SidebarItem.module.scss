// src/components/Sidebar/styles/SidebarItem.module.scss
@import "../../styles/variables";
@import "@/styles/mixins";

.item {
  &-wrapper {
    position: relative;
    width: 100%;
  }

  &__button {
    width: 100%;
    @include flex(row, flex-start, center);
    gap: $sidebar-spacing-md;
    padding: $sidebar-spacing-md;
    transition: all $sidebar-transition-duration $sidebar-transition-timing;
    position: relative;
    text-decoration: none;
    outline: none;

    &--level-1 {
      padding-left: calc(#{$sidebar-spacing-md} * 2);
    }

    &--level-2 {
      padding-left: calc(#{$sidebar-spacing-md} * 3);
    }

    &.theme-dark {
      &::before {
        background: map-get($sidebar-dark, "active");
      }

      &:hover:not(&--disabled) {
        background: linear-gradient(
          90deg,
          rgba(map-get($sidebar-dark, "hover"), 0.1) 0%,
          transparent 100%
        );
      }

      &--active {
        background: linear-gradient(
          90deg,
          rgba(map-get($sidebar-dark, "active"), 0.15) 0%,
          transparent 100%
        );
      }
    }

    &.theme-light {
      &::before {
        background: map-get($sidebar-light, "active");
      }

      &:hover:not(&--disabled) {
        background: linear-gradient(
          90deg,
          rgba(map-get($sidebar-light, "hover"), 0.1) 0%,
          transparent 100%
        );
      }

      &--active {
        background: linear-gradient(
          90deg,
          rgba(map-get($sidebar-light, "active"), 0.15) 0%,
          transparent 100%
        );
      }
    }

    &::before {
      content: "";
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      height: 60%;
      width: 3px;
      border-radius: 0 4px 4px 0;
      opacity: 0;
      transition: opacity $sidebar-transition-duration
        $sidebar-transition-timing;
    }

    &--active {
      &::before {
        opacity: 1;
      }
    }

    &--disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    &--collapsed {
      justify-content: center;
      padding: $sidebar-spacing-md;

      &::before {
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 24px;
        height: 3px;
        border-radius: 0 0 4px 4px;
      }
    }
  }

  &__icon {
    flex-shrink: 0;
    @include flex;
    transition: transform $sidebar-transition-duration
      $sidebar-transition-timing;

    &.theme-dark {
      color: map-get($sidebar-dark, "icon");
    }

    &.theme-light {
      color: map-get($sidebar-light, "icon");
    }

    svg {
      stroke: currentColor;
    }

    @include mobile {
      height: 22px;
      width: 22px;
    }
  }

  &__chevron {
    transition: transform $sidebar-transition-duration
      $sidebar-transition-timing;
    margin-left: auto;
    display: block;

    &--rotated {
      transform: rotate(180deg);
    }

    &.theme-dark {
      color: map-get($sidebar-dark, "icon");
    }

    &.theme-light {
      color: map-get($sidebar-light, "icon");
    }
  }

  &__children {
    overflow: hidden;
    transition: height $sidebar-transition-duration $sidebar-transition-timing;
    height: 0;

    &--open {
      height: auto !important;
    }
  }

  &__title {
    margin-right: auto;

    &.theme-dark {
      color: map-get($sidebar-dark, "icon");
    }

    &.theme-light {
      color: map-get($sidebar-light, "icon");
    }
  }

  &__child {
    // padding-left: $sidebar-spacing-md;
    position: relative;
    margin-left: $sidebar-spacing-xl;

    &::before {
      content: "";
      position: absolute;
      left: -$sidebar-spacing-md;
      top: 0;
      bottom: 0;
      width: 1px;
      background: map-get($sidebar-dark, "border");
      opacity: 0.4;
    }

    &:last-child::before {
      height: 50%;
    }
  }

  .subitem {
    display: flex;
    align-items: center;
    gap: $sidebar-spacing-md;
    text-decoration: none;
    padding: $sidebar-spacing-sm;
    width: 100%;
    position: relative;
    margin: $sidebar-spacing-xs 0;

    &__text {
      opacity: 0.8;

      &.theme-dark {
        color: map-get($sidebar-dark, "icon");
      }

      &.theme-light {
        color: map-get($sidebar-light, "icon");
      }
    }

    &::before {
      content: "";
      position: absolute;
      left: -$sidebar-spacing-md;
      top: 50%;
      width: $sidebar-spacing-sm;
      height: 1px;
      background: map-get($sidebar-dark, "border");
      opacity: 0.4;
    }

    &::after {
      content: "";
      position: absolute;
      left: -$sidebar-spacing-md;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: map-get($sidebar-dark, "border");
      opacity: 0.8;
    }

    &.theme-dark {
      &:hover:not(&--disabled) {
        background: linear-gradient(
          90deg,
          rgba(map-get($sidebar-dark, "hover"), 0.1) 0%,
          transparent 100%
        );
      }

      &--active {
        background: rgba(map-get($sidebar-dark, "active"), 0.1);
      }

      .subitem__lock {
        color: map-get($sidebar-dark, "icon");
      }
    }

    &.theme-light {
      &:hover:not(&--disabled) {
        background: linear-gradient(
          90deg,
          rgba(map-get($sidebar-light, "hover"), 0.1) 0%,
          transparent 100%
        );
      }

      &--active {
        background: rgba(map-get($sidebar-light, "active"), 0.1);
      }

      .subitem__lock {
        color: map-get($sidebar-light, "icon");
      }
    }

    &--disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    &--disabled:hover {
      background-color: transparent;
    }

    &__text {
      flex: 1;
    }

    &__lock {
      margin-left: auto;
      opacity: 0.4;
    }
  }

  .tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.85);
    padding: 10px;
    border-radius: 5px;
    max-width: 200px;
    text-align: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;

    &--collapsed {
      opacity: 1;
      visibility: visible;
    }
  }
}

// .item__child {
//   position: relative;
//   margin-left: $sidebar-spacing-xl;

//   &::before {
//     content: "";
//     position: absolute;
//     left: -$sidebar-spacing-md;
//     top: 0;
//     bottom: 0;
//     width: 1px;
//     background-image: linear-gradient(
//       to bottom,
//       transparent,
//       map-get($sidebar-dark, "border") 20%,
//       map-get($sidebar-dark, "border") 80%,
//       transparent
//     );
//     opacity: 0.6;
//   }

//   .subitem {
//     position: relative;

//     &::before {
//       content: "";
//       position: absolute;
//       left: -$sidebar-spacing-md;
//       top: 50%;
//       width: $sidebar-spacing-sm;
//       height: 1px;
//       background: map-get($sidebar-dark, "border");
//       // opacity: 0.8;
//       transition: width 0.2s ease, opacity 0.2s ease;
//     }

//     &:hover::before {
//       width: calc($sidebar-spacing-sm + 4px);
//       // opacity: 0.8;
//     }

//     &--active::before {
//       background: map-get($sidebar-dark, "icon-hover");
//       width: $sidebar-spacing-md;
//       opacity: 1;
//     }
//   }
// }
